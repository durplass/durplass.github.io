<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DURPLASS S.A.S. | Aberturas de PVC y Aluminio a Medida</title>
    <!-- Carga de Tailwind CSS para un diseño moderno y responsive -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Carga de íconos Lucide -->
    <script type="module">
      import { createIcons, Mail, Phone, MapPin, Menu, X, Factory, DollarSign, Target, Home, Layers3, Brush } from 'https://cdn.jsdelivr.net/npm/lucide-esm@latest';
      createIcons({ icons: { Mail, Phone, MapPin, Menu, X, Factory, DollarSign, Target, Home, Layers3, Brush } });
    </script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
    
    <!-- Importaciones de Firebase (Firestore y Auth) -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, signInWithCustomToken } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, doc, collection, addDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        // Variables globales para el estado de la aplicación
        let db;
        let auth;
        let userId = 'anonymous';

        // Constantes del entorno (MANDATORIO)
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
        const firebaseConfig = typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : {};
        const initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;

        /**
         * Función principal para cambiar la vista de la aplicación.
         * @param {string} pageId - El ID de la sección a mostrar ('inicio-page' o 'presupuesto-page').
         */
        window.navigateTo = function(pageId) {
            const pages = ['inicio-page', 'presupuesto-page'];
            pages.forEach(id => {
                const element = document.getElementById(id);
                if (element) {
                    element.classList.add('hidden');
                }
            });
            const targetElement = document.getElementById(pageId);
            if (targetElement) {
                targetElement.classList.remove('hidden');
                window.scrollTo(0, 0); // Ir al inicio de la nueva página
            }

            // Actualizar estado del menú
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('text-[var(--color-accent-blue)]');
                if (link.dataset.page === pageId) {
                    link.classList.add('text-[var(--color-accent-blue)]');
                }
            });
        }
        
        /**
         * Inicializa Firebase, autentica al usuario y establece el ID de usuario.
         */
        async function initializeFirebase() {
            try {
                if (Object.keys(firebaseConfig).length === 0) {
                    console.warn("Firebase config is empty. Firestore will not be functional.");
                    return;
                }
                
                const app = initializeApp(firebaseConfig);
                db = getFirestore(app);
                auth = getAuth(app);

                if (initialAuthToken) {
                    await signInWithCustomToken(auth, initialAuthToken);
                } else {
                    await signInAnonymously(auth);
                }

                userId = auth.currentUser ? auth.currentUser.uid : crypto.randomUUID();
                console.log("Firebase initialized. User ID:", userId);

            } catch (error) {
                console.error("Error al inicializar Firebase o autenticar:", error);
                showMessage(`Error de conexión: ${error.message}`, 'bg-red-500');
            }
        }

        /**
         * Muestra un mensaje de estado al usuario.
         * @param {string} message - El mensaje a mostrar.
         * @param {string} className - Clase de Tailwind para el color (e.g., 'bg-green-500').
         */
        function showMessage(message, className) {
            const statusMessage = document.getElementById('form-status');
            if (!statusMessage) {
                console.error("DOM element 'form-status' not found. Skipping message display.");
                return;
            }

            statusMessage.classList.remove('hidden', 'bg-red-500', 'bg-green-500', 'bg-yellow-500');
            statusMessage.classList.add(className);
            statusMessage.textContent = message;
            
            setTimeout(() => {
                statusMessage.classList.add('hidden');
            }, 6000);
        }

        /**
         * Maneja el cambio del selector de material y actualiza las opciones de color.
         */
        window.updateColorOptions = function() {
            const materialSelect = document.getElementById('material');
            const colorSelect = document.getElementById('color-perfil');
            const selectedMaterial = materialSelect.value;

            // Limpiar opciones anteriores
            colorSelect.innerHTML = ''; 

            if (selectedMaterial === 'pvc') {
                // Opciones para PVC (Blanco, Negro, Símil Madera)
                const pvcColors = [
                    { value: 'blanco', text: 'Blanco (Estándar)' },
                    { value: 'negro', text: 'Negro' },
                    { value: 'similmadera', text: 'Símil Madera' },
                    { value: 'otros', text: 'Otros (Especificar en detalles)' }
                ];
                pvcColors.forEach(color => {
                    colorSelect.options.add(new Option(color.text, color.value));
                });
            } else if (selectedMaterial === 'aluminio') {
                // Opciones para Aluminio (Blanco, Negro/Anodizado)
                const aluminioColors = [
                    { value: 'blanco', text: 'Blanco' },
                    { value: 'negro', text: 'Negro' },
                    { value: 'anodizadonatural', text: 'Anodizado Natural' },
                    { value: 'otros', text: 'Otros (Especificar en detalles)' }
                ];
                aluminioColors.forEach(color => {
                    colorSelect.options.add(new Option(color.text, color.value));
                });
            } else {
                // Opción por defecto
                 colorSelect.options.add(new Option('Seleccione primero el Material...', '', true, true));
            }
        }

        /**
         * Maneja el envío del formulario y guarda la solicitud en Firestore.
         */
        window.saveBudgetRequest = async function(event) {
            event.preventDefault();
            
            if (!db) {
                showMessage('Error: La base de datos no está inicializada. Intente recargar.', 'bg-red-500');
                return;
            }

            const form = document.getElementById('budget-form');
            if (!form.checkValidity()) {
                showMessage('Por favor, complete todos los campos obligatorios correctamente.', 'bg-yellow-500');
                form.reportValidity(); // Muestra mensajes de error del navegador
                return;
            }

            const formData = new FormData(form);
            const data = {};
            formData.forEach((value, key) => data[key] = value);

            // Preparar el documento para Firestore
            const requestData = {
                timestamp: serverTimestamp(),
                userId: userId,
                status: 'Pendiente',
                // Datos del formulario
                nombre: data.nombre,
                email: data.email,
                telefono: data.telefono,
                localidad: data.localidad,
                tipoCliente: data['tipo-cliente'],
                tipoObra: data['tipo-obra'],
                
                // Nuevos campos de especificación
                material: data.material,
                productoPrincipal: data['producto-principal'],
                cantidadEstimada: parseInt(data['cantidad-estimada'], 10) || 0,
                colorPerfil: data['color-perfil'],
                tipoVidrio: data['tipo-vidrio'],
                medidasEstimadas: data['medidas-estimadas'],
                detallesAdicionales: data['detalles-adicionales'],
            };

            try {
                // Ruta para datos privados del usuario: /artifacts/{appId}/users/{userId}/budget_requests
                const userRef = doc(db, 'artifacts', appId, 'users', userId);
                const collectionRef = collection(userRef, 'budget_requests');
                
                await addDoc(collectionRef, requestData);

                showMessage('¡Solicitud de presupuesto enviada con éxito! Nos pondremos en contacto pronto.', 'bg-green-500');
                form.reset(); // Limpia el formulario
                window.updateColorOptions(); // Restablece la lista de colores
            } catch (error) {
                console.error("Error al guardar la solicitud en Firestore: ", error);
                // FIX: El mensaje de error era el problema, ahora debería ser más informativo
                showMessage(`Error al enviar la solicitud (Ver consola): ${error.message}`, 'bg-red-500');
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            // Inicializar la aplicación
            initializeFirebase();
            window.navigateTo('inicio-page'); // Mostrar la página de inicio por defecto
            window.updateColorOptions(); // Inicializar las opciones de color

            // Toggle mobile menu visibility
            const menuButton = document.getElementById('menu-button');
            const mobileMenu = document.getElementById('mobile-menu');

            if(menuButton && mobileMenu) {
                menuButton.addEventListener('click', function() {
                    mobileMenu.classList.toggle('hidden');
                });
            }

            // Manejo de navegación en menú móvil y desktop
            document.querySelectorAll('.nav-link').forEach(link => {
                link.addEventListener('click', (e) => {
                    const pageId = e.currentTarget.dataset.page;
                    window.navigateTo(pageId);
                    if(mobileMenu) mobileMenu.classList.add('hidden'); // Ocultar después de navegar en móvil
                });
            });
        });
    </script>
    
    <style>
        /* Paleta de Colores DURPLASS inspirada en el logo (Marrón, Azul, Dorado) */
        :root {
            --color-primary-dark: #3A2A1A; /* Marrón Oscuro - Base del logo */
            --color-accent-blue: #0C7AFE; /* Azul Brillante - Ventanas/Acento, más llamativo */
            --color-warm-gold: #A07A48; /* Dorado - Acento Cálido */
            --color-bg-light: #F8F8F8; /* Fondo de Secciones */
            --color-text-main: #222;
            --color-white: #ffffff;
            font-family: 'Inter', sans-serif;
        }

        /* Estilos generales, scroll suave y corrección de espaciado de líneas */
        html { scroll-behavior: smooth; }
        body { color: var(--color-text-main); }

        /* Estilo para los botones principales (Moderno y con Sombra) */
        .btn-primary {
            background-color: var(--color-accent-blue);
            color: var(--color-white);
            transition: all 0.3s ease;
            box-shadow: 0 6px 15px -3px rgba(12, 122, 254, 0.4); /* Sombra azul más marcada */
        }
        .btn-primary:hover {
            background-color: #0060e2; /* Un tono más oscuro */
            transform: translateY(-2px);
            box-shadow: 0 10px 20px -5px rgba(12, 122, 254, 0.6);
        }
        
        /* Estilo para la portada (Hero Section) */
        .hero-section {
            /* Usando una imagen simulada más impactante con color de marca */
            background-image: url('https://placehold.co/1920x800/0C7AFE/ffffff?text=DURPLASS+PVC+%26+ALUMINIO+PREMIUM');
            background-size: cover;
            background-position: center;
            position: relative;
        }
        .hero-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.4); /* Oscurecer ligeramente para que el texto resalte */
            z-index: 1;
        }
        .hero-section > * { z-index: 2; position: relative; }
        
        /* Estilos específicos para el formulario */
        .form-group > label {
            font-weight: 600;
            color: var(--color-primary-dark);
            margin-bottom: 0.25rem;
            display: block;
        }
        .form-group select, 
        .form-group input:not([type='radio']):not([type='checkbox']), 
        .form-group textarea {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #d1d5db;
            border-radius: 0.5rem;
            transition: all 0.2s;
        }
        .form-group input:focus, 
        .form-group select:focus, 
        .form-group textarea:focus {
            border-color: var(--color-accent-blue);
            box-shadow: 0 0 0 2px rgba(12, 122, 254, 0.2);
            outline: none;
        }

    </style>
</head>
<body class="bg-white">

    <!-- Navbar/Header Fijo (Responsive) -->
    <header class="sticky top-0 z-50 bg-white shadow-lg">
        <nav class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-20">
                <!-- Logo de la Empresa -->
                <a href="#" onclick="navigateTo('inicio-page')" class="text-2xl font-extrabold text-[var(--color-primary-dark)] tracking-wider">
                    DURPLASS <span class="text-lg font-light text-[var(--color-accent-blue)]">S.A.S.</span>
                </a>
                
                <!-- Menú Desktop -->
                <div class="hidden md:flex space-x-8">
                    <a href="#" data-page="inicio-page" class="nav-link text-gray-600 hover:text-[var(--color-accent-blue)] font-medium transition duration-150 ease-in-out text-[var(--color-accent-blue)]">Inicio</a>
                    <a href="#" data-page="presupuesto-page" class="nav-link text-gray-600 hover:text-[var(--color-accent-blue)] font-medium transition duration-150 ease-in-out">Presupuesto</a>
                    <a href="#contacto-section" class="text-gray-600 hover:text-[var(--color-accent-blue)] font-medium transition duration-150 ease-in-out">Contacto</a>
                </div>

                <!-- Botón de Menú para Móviles -->
                <button id="menu-button" type="button" class="md:hidden p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-[var(--color-accent-blue)]" aria-controls="mobile-menu" aria-expanded="false">
                    <icon name="Menu" size="24" class="block h-6 w-6"></icon>
                </button>
            </div>
        </nav>

        <!-- Menú Móvil (Oculto por defecto) -->
        <div class="hidden md:hidden" id="mobile-menu">
            <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3 flex flex-col">
                <a href="#" data-page="inicio-page" class="nav-link text-gray-600 hover:bg-gray-50 hover:text-[var(--color-accent-blue)] px-3 py-2 rounded-md text-base font-medium text-[var(--color-accent-blue)]">Inicio</a>
                <a href="#" data-page="presupuesto-page" class="nav-link text-gray-600 hover:bg-gray-50 hover:text-[var(--color-accent-blue)] px-3 py-2 rounded-md text-base font-medium">Presupuesto</a>
                <a href="#contacto-section" class="text-gray-600 hover:bg-gray-50 hover:text-[var(--color-accent-blue)] px-3 py-2 rounded-md text-base font-medium">Contacto</a>
            </div>
        </div>
    </header>

    <main>
        <!-- VISTA 1: PÁGINA PRINCIPAL (INICIO + SERVICIOS + CONTACTO - Todo en una sola vista) -->
        <section id="inicio-page" class="transition-all duration-500">
            <!-- Sección 1: Portada Brillante (Hero Section) -->
            <div class="hero-section h-[70vh] flex items-center justify-center text-center">
                <div class="text-white p-6 sm:p-12 rounded-xl backdrop-blur-sm bg-black/40 shadow-2xl">
                    <p class="text-lg font-light mb-3 tracking-widest uppercase">Tecnología y Aislamiento</p>
                    <h1 class="text-5xl sm:text-7xl font-extrabold mb-5 drop-shadow-xl leading-tight">
                        DURPLASS: Aberturas de Excelencia
                    </h1>
                    <p class="text-xl sm:text-2xl font-light mb-10 drop-shadow-lg max-w-4xl mx-auto">
                        Fabricamos la solución perfecta en PVC y Aluminio para la Patagonia y todo Argentina, desde nuestra fábrica en Buenos Aires.
                    </p>
                    <a href="#" onclick="navigateTo('presupuesto-page')" class="inline-block px-10 py-4 rounded-xl text-lg font-semibold btn-primary uppercase tracking-wider">
                        <icon name="DollarSign" size="20" class="inline mr-2"></icon>
                        Cotizar Ahora
                    </a>
                </div>
            </div>

            <!-- Sección 2: Servicios/Productos Destacados -->
            <div id="servicios-section" class="py-16 sm:py-24 bg-white">
                <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                    <div class="text-center mb-16">
                        <h2 class="text-4xl font-extrabold text-[var(--color-primary-dark)] mb-4">Nuestras Soluciones</h2>
                        <p class="text-xl text-gray-600 max-w-3xl mx-auto">Calidad, diseño y la resistencia que su proyecto requiere.</p>
                    </div>
                    
                    <div class="grid md:grid-cols-3 gap-10">
                        <!-- Tarjeta 1: Aberturas de PVC -->
                        <div class="bg-[var(--color-bg-light)] p-8 rounded-xl shadow-lg hover:shadow-2xl transition duration-300 transform hover:scale-[1.02] border-t-4 border-[var(--color-accent-blue)]">
                            <icon name="Layers3" size="36" class="text-[var(--color-accent-blue)] mb-4"></icon>
                            <h3 class="text-2xl font-semibold mb-3 text-[var(--color-primary-dark)]">Aberturas de PVC</h3>
                            <p class="text-gray-600">Líderes en aislamiento térmico y acústico. Ideales para el clima extremo de la Patagonia, garantizando eficiencia energética.</p>
                        </div>

                        <!-- Tarjeta 2: Aberturas de Aluminio -->
                        <div class="bg-[var(--color-bg-light)] p-8 rounded-xl shadow-lg hover:shadow-2xl transition duration-300 transform hover:scale-[1.02] border-t-4 border-[var(--color-primary-dark)]">
                            <icon name="Home" size="36" class="text-[var(--color-primary-dark)] mb-4"></icon>
                            <h3 class="text-2xl font-semibold mb-3 text-[var(--color-primary-dark)]">Aberturas de Aluminio</h3>
                            <p class="text-gray-600">Perfiles robustos, diseño moderno y gran resistencia estructural. Amplia variedad de acabados y líneas.</p>
                        </div>

                        <!-- Tarjeta 3: Logística y Asesoramiento -->
                        <div class="bg-[var(--color-bg-light)] p-8 rounded-xl shadow-lg hover:shadow-2xl transition duration-300 transform hover:scale-[1.02] border-t-4 border-[var(--color-warm-gold)]">
                             <icon name="Factory" size="36" class="text-[var(--color-warm-gold)] mb-4"></icon>
                            <h3 class="text-2xl font-semibold mb-3 text-[var(--color-primary-dark)]">Logística Nacional</h3>
                            <p class="text-gray-600">Fabricación centralizada en Tristán Suárez (BA) y distribución eficiente, con foco en el servicio a la Patagonia (Ushuaia).</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Sección 3: Contacto (Información de Ubicaciones) -->
            <div id="contacto-section" class="py-16 sm:py-24 bg-[var(--color-bg-light)]">
                <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                    <div class="text-center mb-12">
                        <h2 class="text-4xl font-extrabold text-[var(--color-primary-dark)] mb-4">Contáctenos</h2>
                        <p class="text-xl text-gray-600">Dos puntos estratégicos para un servicio integral.</p>
                    </div>

                    <div class="grid md:grid-cols-2 gap-10">
                        <!-- Contacto 1: Oficina de Ventas (Ushuaia) -->
                        <div class="bg-white p-8 rounded-xl shadow-xl border-b-4 border-[var(--color-accent-blue)]">
                            <icon name="MapPin" size="36" class="text-[var(--color-accent-blue)] mb-4"></icon>
                            <h3 class="text-2xl font-semibold mb-3 text-[var(--color-primary-dark)]">Oficina Central de Ventas</h3>
                            <p class="text-xl font-bold mb-4 text-[var(--color-accent-blue)]">Ushuaia, Tierra del Fuego</p>
                            
                            <ul class="space-y-3 text-gray-700">
                                <li>
                                    <icon name="MapPin" size="18" class="inline mr-2 text-gray-500"></icon>
                                    Av. San Martín 1500 (Dirección Mock)
                                </li>
                                <li>
                                    <icon name="Phone" size="18" class="inline mr-2 text-gray-500"></icon>
                                    **Teléfono Ventas:** (02901) 42-XXXX (Placeholder)
                                </li>
                                <li>
                                    <icon name="Mail" size="18" class="inline mr-2 text-gray-500"></icon>
                                    **Email Ventas:** <a href="mailto:ventas@durplass.com.ar" class="text-[var(--color-accent-blue)] hover:underline">ventas@durplass.com.ar</a>
                                </li>
                            </ul>
                        </div>

                        <!-- Contacto 2: Fábrica de Producción (Tristán Suárez) -->
                        <div class="bg-white p-8 rounded-xl shadow-xl border-b-4 border-[var(--color-primary-dark)]">
                            <icon name="Factory" size="36" class="text-[var(--color-primary-dark)] mb-4"></icon>
                            <h3 class="text-2xl font-semibold mb-3 text-[var(--color-primary-dark)]">Fábrica y Logística</h3>
                            <p class="text-xl font-bold mb-4 text-[var(--color-primary-dark)]">Tristán Suárez, Buenos Aires</p>
                            
                            <ul class="space-y-3 text-gray-700">
                                <li>
                                    <icon name="MapPin" size="18" class="inline mr-2 text-gray-500"></icon>
                                    Ruta 205 Km 42 (Dirección Mock)
                                </li>
                                <li>
                                    <icon name="Phone" size="18" class="inline mr-2 text-gray-500"></icon>
                                    **Teléfono Fábrica:** (011) 43-XXXX (Placeholder)
                                </li>
                                <li>
                                    <icon name="Mail" size="18" class="inline mr-2 text-gray-500"></icon>
                                    **Email General:** <a href="mailto:info@durplass.com.ar" class="text-[var(--color-accent-blue)] hover:underline">info@durplass.com.ar</a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </section>


        <!-- VISTA 2: PÁGINA DE PRESUPUESTO (Oculta por defecto) -->
        <section id="presupuesto-page" class="py-16 sm:py-24 bg-[var(--color-bg-light)] hidden transition-all duration-500">
            <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center mb-12">
                    <h2 class="text-4xl font-extrabold text-[var(--color-primary-dark)] mb-4">Solicitud de Presupuesto Detallado</h2>
                    <p class="text-xl text-gray-600">Seleccione el material, configure su producto y reciba su cotización sin compromiso.</p>
                </div>

                <!-- Mensaje de Estado (Para errores de validación o éxito) -->
                <div id="form-status" class="hidden p-4 mb-6 text-white font-semibold rounded-lg shadow-md text-center" role="alert">
                    Mensaje de estado.
                </div>

                <div class="bg-white p-6 sm:p-10 rounded-2xl shadow-xl border border-gray-100">
                    <form id="budget-form" onsubmit="saveBudgetRequest(event)" class="space-y-8">
                        
                        <!-- Grupo 1: Datos de Contacto y Perfil -->
                        <fieldset class="border border-gray-200 p-6 rounded-lg space-y-6">
                            <legend class="text-xl font-bold text-[var(--color-accent-blue)] px-2">1. Información Personal y de Obra</legend>
                            
                            <!-- Tipo de Cliente y Obra -->
                            <div class="grid md:grid-cols-2 gap-6">
                                <div class="form-group">
                                    <label for="tipo-cliente">Tipo de Cliente <span class="text-red-500">*</span></label>
                                    <select id="tipo-cliente" name="tipo-cliente" required>
                                        <option value="">Seleccione...</option>
                                        <option value="particular">Particular</option>
                                        <option value="empresa">Empresa / Constructor</option>
                                        <option value="arquitecto">Arquitecto / Estudio</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="tipo-obra">Tipo de Obra <span class="text-red-500">*</span></label>
                                    <select id="tipo-obra" name="tipo-obra" required>
                                        <option value="">Seleccione...</option>
                                        <option value="nueva">Obra Nueva</option>
                                        <option value="remodelacion">Remodelación/Reemplazo</option>
                                    </select>
                                </div>
                            </div>
                            
                            <!-- Datos de Contacto -->
                            <div class="grid md:grid-cols-2 gap-6">
                                <div class="form-group">
                                    <label for="nombre">Nombre y Apellido / Razón Social <span class="text-red-500">*</span></label>
                                    <input type="text" id="nombre" name="nombre" placeholder="Juan Pérez / Constructora ABC" required>
                                </div>
                                <div class="form-group">
                                    <label for="email">Email <span class="text-red-500">*</span></label>
                                    <input type="email" id="email" name="email" placeholder="contacto@ejemplo.com" required>
                                </div>
                                <div class="form-group">
                                    <label for="telefono">Teléfono (con código de área) <span class="text-red-500">*</span></label>
                                    <input type="tel" id="telefono" name="telefono" placeholder="Ej: 011 15 4444 5555" required>
                                </div>
                                <div class="form-group">
                                    <label for="localidad">Localidad de la Obra <span class="text-red-500">*</span></label>
                                    <input type="text" id="localidad" name="localidad" placeholder="Tristán Suárez, Ushuaia, etc." required>
                                </div>
                            </div>
                        </fieldset>

                        <!-- Grupo 2: Especificaciones del Producto (LÓGICA CRÍTICA) -->
                        <fieldset class="border border-gray-200 p-6 rounded-lg space-y-6">
                            <legend class="text-xl font-bold text-[var(--color-accent-blue)] px-2">2. Especificaciones de Aberturas</legend>
                            
                            <div class="grid md:grid-cols-3 gap-6">
                                <!-- Campo de Material (PVC o ALUMINIO) -->
                                <div class="form-group">
                                    <label for="material">Material Principal <span class="text-red-500">*</span></label>
                                    <select id="material" name="material" onchange="updateColorOptions()" required>
                                        <option value="">Seleccione Material...</option>
                                        <option value="pvc">PVC</option>
                                        <option value="aluminio">ALUMINIO</option>
                                        <option value="puertachapa">PUERTA DE CHAPA (a medida)</option>
                                    </select>
                                </div>
                                
                                <!-- Opciones de Producto -->
                                <div class="form-group">
                                    <label for="producto-principal">Tipo de Producto <span class="text-red-500">*</span></label>
                                    <select id="producto-principal" name="producto-principal" required>
                                        <option value="">Seleccione Producto...</option>
                                        <option value="corrediza">Corrediza</option>
                                        <option value="oscilobatiente">Oscilo-Batiente</option>
                                        <option value="fija">Fija / Paño Fijo</option>
                                        <option value="puerta">Puerta Balcón / de Acceso</option>
                                        <option value="otros">Otros</option>
                                    </select>
                                </div>
                                
                                <!-- Opciones de Color (Cambian con la función JS) -->
                                <div class="form-group">
                                    <label for="color-perfil">Color de Perfil <span class="text-red-500">*</span></label>
                                    <select id="color-perfil" name="color-perfil" required>
                                        <option value="">Seleccione primero el Material...</option>
                                    </select>
                                </div>
                                
                                <div class="form-group">
                                    <label for="tipo-vidrio">Tipo de Vidrio</label>
                                    <select id="tipo-vidrio" name="tipo-vidrio">
                                        <option value="simple">Simple</option>
                                        <option value="dvh494">Doble Vidrio Hermético (DVH 4/9/4)</option>
                                        <option value="dvhotros">DVH (Otras configuraciones)</option>
                                        <option value="laminado">Laminado de Seguridad</option>
                                        <option value="triplice">Triple Vidriado Hermético (TVH)</option>
                                    </select>
                                </div>
                                
                                <div class="form-group">
                                    <label for="cantidad-estimada">Cantidad Estimada</label>
                                    <input type="number" id="cantidad-estimada" name="cantidad-estimada" min="1" placeholder="Ej: 5">
                                </div>

                                <div class="form-group md:col-span-1">
                                    <label for="medidas-estimadas">Medidas Principales (Ancho x Alto)</label>
                                    <input type="text" id="medidas-estimadas" name="medidas-estimadas" placeholder="Ej: 1500mm x 1200mm, o listar principales">
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label for="detalles-adicionales">Detalles Adicionales y Requerimientos Especiales</label>
                                <textarea id="detalles-adicionales" name="detalles-adicionales" rows="4" placeholder="Indique el total de aberturas, persianas, mosquiteros u otros detalles que ayuden a la cotización..."></textarea>
                            </div>
                        </fieldset>

                        <div class="text-center pt-4">
                            <button type="submit" class="w-full md:w-auto px-10 py-4 rounded-xl text-xl font-bold btn-primary uppercase tracking-wide">
                                <icon name="DollarSign" size="20" class="inline mr-2"></icon>
                                Enviar Solicitud de Presupuesto
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </section>

    </main>

    <!-- Footer (Fuera de las secciones de página para que aparezca en ambas vistas) -->
    <footer class="bg-[var(--color-primary-dark)] text-white py-10">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <p class="text-lg font-bold mb-2">DURPLASS S.A.S. | Aberturas y Soluciones Constructivas</p>
            <div class="flex flex-col sm:flex-row justify-center space-y-2 sm:space-y-0 sm:space-x-8 text-sm text-gray-300 mb-4">
                <a href="#" onclick="navigateTo('inicio-page')" class="nav-link hover:text-[var(--color-warm-gold)]">Inicio</a>
                <a href="#" onclick="navigateTo('presupuesto-page')" class="nav-link hover:text-[var(--color-warm-gold)]">Presupuesto</a>
                <a href="#contacto-section" class="hover:text-[var(--color-warm-gold)]">Contacto</a>
            </div>
             <p class="text-xs text-gray-400">© 2025 DURPLASS S.A.S. Todos los derechos reservados. | Fábrica en Tristán Suárez, BA. | Ventas en Ushuaia, TDF. | ID de Sesión: ${userId}</p>
        </div>
    </footer>

</body>
</html>
